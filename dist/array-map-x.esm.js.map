{"version":3,"sources":["../src/array-map-x.js"],"names":[],"mappings":"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","file":"array-map-x.esm.js","sourcesContent":["import attempt from 'attempt-x';\nimport splitIfBoxedBug from 'split-if-boxed-bug-x';\nimport toLength from 'to-length-x';\nimport isUndefined from 'validate.io-undefined';\nimport toObject from 'to-object-x';\nimport assertIsFunction from 'assert-is-function-x';\n\n/** @type {ArrayConstructor} */\nconst ArrayCtr = [].constructor;\n/** @type {ObjectConstructor} */\nconst castObject = {}.constructor;\n/** @type {BooleanConstructor} */\nconst castBoolean = true.constructor;\nconst nativeMap = typeof ArrayCtr.prototype.map === 'function' && ArrayCtr.prototype.map;\n\nlet isWorking;\n\nif (nativeMap) {\n  let spy = 0;\n  let res = attempt.call([1, 2], nativeMap, (item) => {\n    return item;\n  });\n\n  isWorking = res.threw === false && res.value && res.value.length === 2 && res.value[0] === 1 && res.value[1] === 2;\n\n  if (isWorking) {\n    spy = '';\n    res = attempt.call(castObject('ab'), nativeMap, (item) => {\n      return item;\n    });\n\n    isWorking = res.threw === false && res.value && res.value.length === 2 && res.value[0] === 'a' && res.value[1] === 'b';\n  }\n\n  if (isWorking) {\n    spy = 0;\n    res = attempt.call(\n      (function returnArgs() {\n        /* eslint-disable-next-line prefer-rest-params */\n        return arguments;\n      })(1, 2),\n      nativeMap,\n      (item) => {\n        return item;\n      },\n    );\n\n    isWorking = res.threw === false && res.value && res.value.length === 2 && res.value[0] === 1 && res.value[1] === 2;\n  }\n\n  if (isWorking) {\n    spy = 0;\n    res = attempt.call(\n      {\n        0: 1,\n        2: 2,\n        length: 3,\n      },\n      nativeMap,\n      (item) => {\n        return item;\n      },\n    );\n\n    isWorking = res.threw === false && res.value && res.value.length === 3 && 1 in res.value === false;\n  }\n\n  if (isWorking) {\n    const doc = typeof document !== 'undefined' && document;\n\n    if (doc) {\n      spy = null;\n      const fragment = doc.createDocumentFragment();\n      const div = doc.createElement('div');\n      fragment.appendChild(div);\n      res = attempt.call(fragment.childNodes, nativeMap, (item) => {\n        return item;\n      });\n\n      isWorking = res.threw === false && res.value && res.value.length === 1 && res.value[0] === div;\n    }\n  }\n\n  if (isWorking) {\n    const isStrict = (function returnIsStrict() {\n      /* eslint-disable-next-line babel/no-invalid-this */\n      return castBoolean(this) === false;\n    })();\n\n    if (isStrict) {\n      spy = null;\n      res = attempt.call(\n        [1],\n        nativeMap,\n        () => {\n          /* eslint-disable-next-line babel/no-invalid-this */\n          spy = typeof this === 'string';\n        },\n        'x',\n      );\n\n      isWorking = res.threw === false && res.value && res.value.length === 1 && spy === true;\n    }\n  }\n\n  if (isWorking) {\n    spy = {};\n    const fn = [\n      'return nativeMap.call(\"foo\", function (_, __, context) {',\n      'if (BooleanCtr(context) === false || typeof context !== \"object\") {',\n      'spy.value = true;}});',\n    ].join('');\n\n    /* eslint-disable-next-line no-new-func */\n    res = attempt(Function('nativeMap', 'spy', 'BooleanCtr', fn), nativeMap, spy);\n\n    isWorking = res.threw === false && res.value && res.value.length === 3 && spy.value !== true;\n  }\n}\n\n/**\n * This method creates a new array with the results of calling a provided\n * function on every element in the calling array.\n *\n * @param {Array} array - The array to iterate over.\n * @param {Function} callBack - Function that produces an element of the Array.\n * @param {*} [thisArg] - Value to use as this when executing callback.\n * @throws {TypeError} If array is null or undefined.\n * @throws {TypeError} If callBack is not a function.\n * @returns {Array} A new array with each element being the result of the\n * callback function.\n */\nlet $map;\n\nif (nativeMap) {\n  $map = function map(array, callBack /* , thisArg */) {\n    const args = [callBack];\n\n    if (arguments.length > 2) {\n      /* eslint-disable-next-line prefer-rest-params,prefer-destructuring */\n      args[1] = arguments[2];\n    }\n\n    return nativeMap.apply(array, args);\n  };\n} else {\n  $map = function map(array, callBack /* , thisArg */) {\n    const object = toObject(array);\n    // If no callback function or if callback is not a callable function\n    assertIsFunction(callBack);\n    const iterable = splitIfBoxedBug(object);\n    const length = toLength(iterable.length);\n    let thisArg;\n\n    if (arguments.length > 2) {\n      /* eslint-disable-next-line prefer-rest-params,prefer-destructuring */\n      thisArg = arguments[2];\n    }\n\n    const noThis = isUndefined(thisArg);\n    const result = [];\n    result.length = length;\n    for (let i = 0; i < length; i += 1) {\n      if (i in iterable) {\n        const item = iterable[i];\n        result[i] = noThis ? callBack(item, i, object) : callBack.call(thisArg, item, i, object);\n      }\n    }\n\n    return result;\n  };\n}\n\nconst arrayMap = $map;\n\nexport default arrayMap;\n"]}